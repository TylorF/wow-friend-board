(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{17:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),i=n.n(o),c=(n(42),n(40),n(15)),l=n.n(c),s=n(2);function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var h=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return m(r,(n=r=m(this,(e=d(t)).call.apply(e,[this].concat(o))),r.state={loaded:!1,expanded:!1,character:null},r.thumbnailUrl=function(e,t,n){var r=t.replace("avatar.jpg","".concat(n,".jpg"));return"".concat("http://render-").concat(e).concat(".worldofwarcraft.com/character/").concat(r,"?alt=/wow/static/images/2d/avatar/1-0.jpg")},r.characterDataUrl=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o="".concat(a.length>0?"&fields=".concat(a.join(",")):""),i="https://".concat(t,".api.battle.net/wow/character/").concat(n,"/").concat(r),c="?locale=en_US&apikey=".concat(e).concat(o);return"".concat(i).concat(c)},r.queryCharacterData=function(){l.a.get(r.characterDataUrl(r.props.apikey,r.props.region,r.props.realm,r.props.character,["items","titles","progression"])).then(function(e){window.progression=e.data.progression,console.log(e.data),r.setState({character:e.data,loaded:!0})}).catch(function(e){r.setState({loaded:!1})})},r.emptyCharacter=function(){return{name:r.props.character,items:{averageItemLevel:"..."},titles:[]}},r.expandable=function(e){return r.state.expanded?"".concat(e," ").concat(s.open):e},r.toggleExpand=function(){return r.setState({expanded:!r.state.expanded})},r.enabledTitleStringOrBlank=function(e){return(e.find(function(e){return e.selected})||{name:"%s"}).name},r.formatNameWithTitle=function(e,t){return e.replace("%s",t)},r.charImageUrlForState=function(){var e=r.state.character||{},t={region:e.region||"us",thumbnailUrl:e.thumbnail||"fallback",type:r.state.expanded?"main":"inset"};return r.thumbnailUrl(t.region,t.thumbnailUrl,t.type)},n))}var n,r,o;return n=t,(r=[{key:"componentDidUpdate",value:function(){this.state.loaded||this.queryCharacterData()}},{key:"componentDidMount",value:function(){this.queryCharacterData()}},{key:"render",value:function(){var e=this.state.character||this.emptyCharacter(),t=this.formatNameWithTitle(this.enabledTitleStringOrBlank(e.titles),e.name);return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:this.expandable(s.FriendCard)},a.a.createElement("div",{className:this.expandable(s.MediumCardImage),style:{backgroundImage:"url('".concat(this.charImageUrlForState(),"')")},onClick:this.toggleExpand}),a.a.createElement("div",{className:s.InfoHolder},a.a.createElement("div",{className:s.NameField},a.a.createElement("span",null,t)),a.a.createElement("br",null),a.a.createElement("div",{className:s.DetailField},a.a.createElement("span",null,"LV: ",e.level)),a.a.createElement("div",{className:s.DetailField},a.a.createElement("span",null,"iLevel: ",e.items.averageItemLevel)),a.a.createElement("div",{className:s.DetailField},a.a.createElement("span",null,"HKs: ",e.totalHonorableKills)),a.a.createElement("div",{className:s.DetailField},a.a.createElement("span",null,"Achievement Points: ",e.achievementPoints)))))}}])&&f(n.prototype,r),o&&f(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");p(e.prototype,t&&t.prototype),t&&p(e,t)}(t,e),t}(r.Component),y=function(e){return e.characters.map(function(t){return a.a.createElement(h,{key:t.name,apikey:e.apiKey,region:t.region,realm:t.realm,character:t.name})})},g=n(3);function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return!t||"object"!==b(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var D=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return E(r,(n=r=E(this,(e=C(t)).call.apply(e,[this].concat(o))),r.state={expanded:!1,selection:null},r.settingsSaveSubmit=function(e){e.preventDefault();var t=new FormData(e.target).get("apiKey"),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){w(e,t,n[t])})}return e}({},r.props.settings,{apiKey:t});r.props.onSaveSettings(n)},r.charactersAddSubmit=function(e){e.preventDefault();var t=new FormData(e.target),n={region:t.get("region"),realm:t.get("realm"),name:t.get("name")},a=r.characterString(n);if(r.props.characters.find(function(e){return r.characterString(e)===a}))return!1;var o=v(r.props.characters).concat([n]);r.props.onSaveCharacters(o)},r.characterString=function(e){return"".concat(e.region,"/").concat(e.realm,"/").concat(e.name)},r.deleteCharacter=function(e){r.props.onSaveCharacters(r.props.characters.filter(function(t){return t!==e}))},n))}var n,r,o;return n=t,(r=[{key:"settingsContent",value:function(){return a.a.createElement("form",{onSubmit:this.settingsSaveSubmit},a.a.createElement("label",null,"Api Key:"),a.a.createElement("input",{id:"apiKey",type:"text",name:"apiKey"}),a.a.createElement("button",null,"Save"))}},{key:"existingCharacterList",value:function(){var e=this;return this.props.characters.map(function(t){return a.a.createElement("div",null,a.a.createElement("label",{onClick:function(){return e.deleteCharacter(t)},key:e.characterString(t)},e.characterString(t)," -- Delete"),a.a.createElement("br",null))})}},{key:"charactersContent",value:function(){return a.a.createElement(a.a.Fragment,null,this.existingCharacterList(),a.a.createElement("form",{onSubmit:this.charactersAddSubmit},a.a.createElement("label",null,"Region:"),a.a.createElement("input",{id:"region",type:"text",name:"region"}),a.a.createElement("br",null),a.a.createElement("label",null,"Realm:"),a.a.createElement("input",{id:"realm",type:"text",name:"realm"}),a.a.createElement("br",null),a.a.createElement("label",null,"Character Name:"),a.a.createElement("input",{id:"name",type:"text",name:"name"}),a.a.createElement("button",null,"Add")))}},{key:"getContent",value:function(e){switch(e){case"settings":return this.settingsContent();case"characters":return this.charactersContent();default:return null}}},{key:"getDropDownTabClass",value:function(e){var t=[g.DropDownTab];return this.state.expanded&&this.state.selection===e&&t.push(g.Active),t.join(" ")}},{key:"onTabClick",value:function(e){e===this.state.selection?this.setState({selection:null,expanded:!1}):this.setState({selection:e,expanded:!0})}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:g.AppBar},a.a.createElement("div",{className:g.Logo},"WoW Friend Board"),a.a.createElement("div",{className:g.DropDownTabHolder},a.a.createElement("div",{className:this.getDropDownTabClass("settings"),onClick:function(){return e.onTabClick("settings")}},"Settings"),a.a.createElement("div",{className:this.getDropDownTabClass("characters"),onClick:function(){return e.onTabClick("characters")}},"Friend List"))),a.a.createElement("div",{className:this.state.expanded?[g.DropDown,g.open].join(" "):g.DropDown},this.getContent(this.state.selection)))}}])&&_(n.prototype,r),o&&_(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");S(e.prototype,t&&t.prototype),t&&S(e,t)}(t,e),t}(r.Component);function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==k(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.getPrototypeOf||function(e){return e.__proto__})(e)}var A=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return N(r,(n=r=N(this,(e=j(t)).call.apply(e,[this].concat(o))),r.state={settings:JSON.parse(localStorage.getItem("settings")||"{}"),characters:JSON.parse(localStorage.getItem("characters")||"[]")},r.onSaveSettings=function(e){localStorage.setItem("settings",JSON.stringify(e)),r.setState({settings:e})},r.onSaveCharacters=function(e){localStorage.setItem("characters",JSON.stringify(e)),r.setState({characters:e})},n))}var n,r,o;return n=t,(r=[{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(D,{characters:this.state.characters,onSaveSettings:this.onSaveSettings,onSaveCharacters:this.onSaveCharacters}),a.a.createElement(y,{apiKey:this.state.settings.apiKey,characters:this.state.characters}))}}])&&x(n.prototype,r),o&&x(n,o),function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");O(e.prototype,t&&t.prototype),t&&O(e,t)}(t,e),t}(r.Component),F=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function T(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(a.a.createElement(A,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/wow-friend-board",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/wow-friend-board","/service-worker.js");F?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):T(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):T(e)})}}()},2:function(e,t,n){e.exports={FriendCard:"FriendCard_FriendCard__20M9P",open:"FriendCard_open__3ZPGx",InfoHolder:"FriendCard_InfoHolder__184Tw",MediumCardImage:"FriendCard_MediumCardImage__2csba",NameField:"FriendCard_NameField__kN1Qs",DetailField:"FriendCard_DetailField__3o6_l"}},3:function(e,t,n){e.exports={AppBar:"AppBar_AppBar__3eFER",DropDown:"AppBar_DropDown__2CSlV",open:"AppBar_open__1zElJ",Logo:"AppBar_Logo__2bwKS",DropDownTabHolder:"AppBar_DropDownTabHolder__-YNvH",DropDownTab:"AppBar_DropDownTab__3EnnQ",Active:"AppBar_Active__1g-W2"}},40:function(e,t,n){},42:function(e,t,n){},57:function(e,t,n){n(56),e.exports=n(17)}},[[57,0,1]]]);
//# sourceMappingURL=main.5965a7ad.chunk.js.map